[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About Matt",
    "section": "",
    "text": "“Me Skydiving in West Point, VA April 2023\n\n\n\n\n\n\n\n“75 Feet Under the Ocean in Captain Cook, Hawaii June 2022\n\n\n\n\n\n\n\n“Recovering My Phone After Dropping it Off a Ski Lift in Whistler, BC, Canada January 2023\n\n\n\n\n\nMatt Carswell is currently a first year graduate student in the Data Science and Analytics program at Georgetown University. He concurrently works part-time as a Market Research and Data Analyst at Weris Inc. where he works closely with the Department of Transporation (USDOT) and the Bureau of Transportation Statistics (BTS) as a Data Consultant. One of his most recent projects includes developing a Work Plan for BTS that outlines data and data analysis tools the federal government can provide to local decision-makers that would aid their transportation infrastruce decisions. This report, Work Plan to Provide Federal Support for Local Decision-making, was reviewed by both the Secretary of Transportaion and by members of Congress.\nMatt graduated in 2022 from the University of Virginia with a BA in Statistics with a concentration in Econometrics and a minor in Economics. Some of his interests include behavioral finance, impact investing, game theory, and leveraging data/statistics in sports handicapping. He intends on graduating at the end of Fall 2024 and find a job in either the impact investing space or sports industry. His lifelong ambition is to create Artifical Intelligence that can produce succesful predicition for any sports handicapping market.\n\n\n\n\n\n\nMS in Data Science and Analytics\nAttending on a Merit Scholarship\nNotable Classes: Data Science and Analytics, Probability/Statistical Computing, Data Science for a Changing Climate\n\n\n\nGPA: 3.6\nBA in Statistics (conc. Econometrics) and a minor in Economics\nNotable Classes: Statistical Machine Learning, Applied Time Series, Behavioral Finance\n\n\n\n\n\nStatistics, Economics, Machine Learning, Impact Investing, Sports Handicapping, Predictive Analytics\n\n\n\nMarathon running, Cooking, SCUBA diving, Snowboarding, Skateboarding, Rap and House Music\n\n\n\n\nLinkedIn\nGitHub"
  },
  {
    "objectID": "about.html#a-picture-is-worth-a-thousand-words",
    "href": "about.html#a-picture-is-worth-a-thousand-words",
    "title": "About Matt",
    "section": "",
    "text": "“Me Skydiving in West Point, VA April 2023\n\n\n\n\n\n\n\n“75 Feet Under the Ocean in Captain Cook, Hawaii June 2022\n\n\n\n\n\n\n\n“Recovering My Phone After Dropping it Off a Ski Lift in Whistler, BC, Canada January 2023"
  },
  {
    "objectID": "about.html#introduction",
    "href": "about.html#introduction",
    "title": "About Matt",
    "section": "",
    "text": "Matt Carswell is currently a first year graduate student in the Data Science and Analytics program at Georgetown University. He concurrently works part-time as a Market Research and Data Analyst at Weris Inc. where he works closely with the Department of Transporation (USDOT) and the Bureau of Transportation Statistics (BTS) as a Data Consultant. One of his most recent projects includes developing a Work Plan for BTS that outlines data and data analysis tools the federal government can provide to local decision-makers that would aid their transportation infrastruce decisions. This report, Work Plan to Provide Federal Support for Local Decision-making, was reviewed by both the Secretary of Transportaion and by members of Congress.\nMatt graduated in 2022 from the University of Virginia with a BA in Statistics with a concentration in Econometrics and a minor in Economics. Some of his interests include behavioral finance, impact investing, game theory, and leveraging data/statistics in sports handicapping. He intends on graduating at the end of Fall 2024 and find a job in either the impact investing space or sports industry. His lifelong ambition is to create Artifical Intelligence that can produce succesful predicition for any sports handicapping market."
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "About Matt",
    "section": "",
    "text": "MS in Data Science and Analytics\nAttending on a Merit Scholarship\nNotable Classes: Data Science and Analytics, Probability/Statistical Computing, Data Science for a Changing Climate\n\n\n\nGPA: 3.6\nBA in Statistics (conc. Econometrics) and a minor in Economics\nNotable Classes: Statistical Machine Learning, Applied Time Series, Behavioral Finance"
  },
  {
    "objectID": "about.html#academic-and-professional-interests",
    "href": "about.html#academic-and-professional-interests",
    "title": "About Matt",
    "section": "",
    "text": "Statistics, Economics, Machine Learning, Impact Investing, Sports Handicapping, Predictive Analytics"
  },
  {
    "objectID": "about.html#hobbies",
    "href": "about.html#hobbies",
    "title": "About Matt",
    "section": "",
    "text": "Marathon running, Cooking, SCUBA diving, Snowboarding, Skateboarding, Rap and House Music"
  },
  {
    "objectID": "about.html#socials",
    "href": "about.html#socials",
    "title": "About Matt",
    "section": "",
    "text": "LinkedIn\nGitHub"
  },
  {
    "objectID": "gathering/gathering.html",
    "href": "gathering/gathering.html",
    "title": "Data Gathering",
    "section": "",
    "text": "I will add way more description in the future. For now, this section is just laying down the groundwork."
  },
  {
    "objectID": "gathering/gathering.html#data-source",
    "href": "gathering/gathering.html#data-source",
    "title": "Data Gathering",
    "section": "Data Source",
    "text": "Data Source\nWhile the HKJC offers publicly available data, it is immensely hard to scrape off the web. This was orginally attempted for this project (for, admittedly, too long of a period of a time), but it requires writing code to solve logic and math games set up by the HJKC. They do not mind people using their data, but they do no want an oversaturation of users using their data. There are many companies that offer up-to-date HJKC data for a monthly subscription, but this is, obviously, not worthwhile for this project. Outside of this paid data and running an extremely complicated API (that is often very sensitive to breaking day-to-day), there is an extremely limited pool of data that is free and easy-to-use.\nUpon scouring the web, I (almost accidentally) stumbled upon a user on GitHub by the username eprochasson who actually used to manage a public, web scraper for Hong Kong and Singapore horse racing. The user has not updated the data obtained from this scraper since 2019, but due to horse racing not really changing as a sport year-to-year (unlike sports like basketball, baseball, etc.), the receny of this data is more than suffcient for this project. The GitHub containing all this data can be found here.\nOn this GitHub site, there are 6 different datasets that can accessed: dividends, horses, live_odds, performances, races, and sectional times. The divideneds and live odds datasets will be not be focused on in this project. Horses and performances will serve as the main sources of data for this project. The data dates backs all the way back to the early 1990s and goes through the middle of 2018. The horses dataset contains information on every horse that is raced in Hong Kong and Singapore, including information about their owners, jockey, its dame and sire (mother and father), and siblings. There are over 20,0000 observations (horses) in this dataset. There are overall 26 features in this dataset.\nA screenshot of the horses csv file (once it is unzipped from the gz file), can be found below: \nThe performances dataset captures every single performance by each of the horses in the horses dataset. Because of this relationship between the datasets, there are almost 400,000 observations in this datset. The datset captures 26 features, including the placement of the horse in the race, its starting draw, and data relating to how it ran all 4 sections of the track.\nA screenshot of the performances csv file (once it is unzipped from the gz file), can be found below: \nAgain, more of a description of the features of all these datasets will be discussed upon further completion of this web page."
  },
  {
    "objectID": "cleaning/text.html",
    "href": "cleaning/text.html",
    "title": "Text Data Cleaning",
    "section": "",
    "text": "import requests\nimport json\nimport re\nimport pandas as pd\nfrom sklearn.feature_extraction.text import CountVectorizer\n\n\nbaseURL = \"https://newsapi.org/v2/everything?\"\ntotal_requests=2\nverbose=True\nAPI_KEY='c42b8e84aab24c85af001b27015206b3'\nTOPIC='Hong Kong Jockey Club'\n\n\nURLpost = {'apiKey': API_KEY,\n            'q': '+'+TOPIC,\n            'sortBy': 'relevancy',\n            'totalRequests': 1}\n\nprint(baseURL)\n# print(URLpost)\n\n#GET DATA FROM API\nresponse = requests.get(baseURL, URLpost) #request data from the server\n# print(response.url);  \nresponse = response.json() #extract txt data from request into json\n\nprint(json.dumps(response, indent=2))\n\n# #GET TIMESTAMP FOR PULL REQUEST\nfrom datetime import datetime\ntimestamp = datetime.now().strftime(\"%Y-%m-%d-H%H-M%M-S%S\")\n\n# SAVE TO FILE \nwith open(timestamp+'-newapi-raw-data.json', 'w') as outfile:\n    json.dump(response, outfile, indent=4)\n\nhttps://newsapi.org/v2/everything?\n{\n  \"status\": \"ok\",\n  \"totalResults\": 5,\n  \"articles\": [\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"Forbes\"\n      },\n      \"author\": \"Zinnia Lee, Forbes Staff, \\n Zinnia Lee, Forbes Staff\\n https://www.forbes.com/sites/zinnialee/\",\n      \"title\": \"This Social Enterprise Backed By Swire And Nan Fung\\u2019s Chen Family Is Teaching Emotional Education In Exam-Obsessed Hong Kong\",\n      \"description\": \"The lack of emotional education in Hong Kong's exam-oriented system inspired Anthony Ngai, Matthew Kwok and Raymond Yang to establish Just Feel.\",\n      \"url\": \"https://www.forbes.com/sites/zinnialee/2023/09/04/this-social-enterprise-backed-by-swire-and-nan-fungs-chen-family-is-teaching-emotional-education-in-exam-obsessed-hong-kong/\",\n      \"urlToImage\": \"https://imageio.forbes.com/specials-images/imageserve/64ef0f6fb3f3f3e2a24af6bd/0x0.jpg?format=jpg&crop=2861,1609,x0,y0,safe&width=1200\",\n      \"publishedAt\": \"2023-09-05T03:00:43Z\",\n      \"content\": \"Just Feel cofounders (left to right): Anthony Ngai, Matthew Kwok and Raymond Yang.\\r\\nJust Feel\\r\\nDuring their time serving as teaching fellows at elementary schools in Hong Kong, Matthew Kwok and Raymo\\u2026 [+4216 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"PRNewswire\"\n      },\n      \"author\": null,\n      \"title\": \"Jockey Club closes Philanthropy for Better Cities Forum with call for global multi-level collaboration in quest for fairer societies\",\n      \"description\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the West Kowloon Cultural District in Hong Kong. The two-day forum \\u2026\",\n      \"url\": \"https://www.prnewswire.com/news-releases/jockey-club-closes-philanthropy-for-better-cities-forum-with-call-for-global-multi-level-collaboration-in-quest-for-fairer-societies-301924908.html\",\n      \"urlToImage\": \"https://mma.prnewswire.com/media/2208533/P1_20230912_PBC_Closing.jpg?p=facebook\",\n      \"publishedAt\": \"2023-09-12T14:12:00Z\",\n      \"content\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the Wes\\u2026 [+4860 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"PRNewswire\"\n      },\n      \"author\": null,\n      \"title\": \"Jockey Club announces Institute of Philanthropy - bringing together local, regional and global thought leadership for the betterment of society\",\n      \"description\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\\\"IoP\\\") at the opening of the Philanthropy for Better Cities Forum 2023 today (11 September) at the West Kowloon Cultural District\\u2026\",\n      \"url\": \"https://www.prnewswire.com/news-releases/jockey-club-announces-institute-of-philanthropy---bringing-together-local-regional-and-global-thought-leadership-for-the-betterment-of-society-301924097.html\",\n      \"urlToImage\": \"https://mma.prnewswire.com/media/2208074/P1_20230911_PBC_IOP.jpg?p=facebook\",\n      \"publishedAt\": \"2023-09-12T04:48:00Z\",\n      \"content\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\\\"IoP\\\") at the opening of the Philanthropy for Better Cities Forum 202\\u2026 [+4780 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"Dezeen\"\n      },\n      \"author\": \"Dezeen staff\",\n      \"title\": \"Eight projects by students at Hong Kong Design Institute\",\n      \"description\": \"Dezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. Also included is a greyscale cityscape comprised of photographs of iconi\\u2026\",\n      \"url\": \"https://www.dezeen.com/2023/09/28/hong-kong-design-institute-jewellery-interiors-design-projects-schoolshows/\",\n      \"urlToImage\": \"https://static.dezeen.com/uploads/2023/09/hong-kong-design-institute-dezeen-schoolshows_dezeen_2364_col_3-copy-600x600.jpg\",\n      \"publishedAt\": \"2023-09-28T16:26:56Z\",\n      \"content\": \"Dezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. \\r\\nAlso inclu\\u2026 [+6956 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"PRNewswire\"\n      },\n      \"author\": null,\n      \"title\": \"Horse and sports betting market to grow by USD 171.87 million from 2022 to 2027 | Increasing digital connectivity drives market growth - Technavio\",\n      \"description\": \"NEW YORK, Aug. 29, 2023 /PRNewswire/ -- The global horse and sports betting market size is estimated to increase by USD 171.87 million from 2022 to 2027. The market's growth momentum will progress at a CAGR of 9.64%. Increasing digital connectivity drives the\\u2026\",\n      \"url\": \"https://www.prnewswire.com/news-releases/horse-and-sports-betting-market-to-grow-by-usd-171-87-million-from-2022-to-2027--increasing-digital-connectivity-drives-market-growth---technavio-301911871.html\",\n      \"urlToImage\": \"https://mma.prnewswire.com/media/2195907/20230822074457_bw_2023_v1.jpg?p=facebook\",\n      \"publishedAt\": \"2023-08-29T09:30:00Z\",\n      \"content\": \"NEW YORK, Aug. 29, 2023 /PRNewswire/ -- The\\u00a0global horse and sports betting\\u00a0market size is estimated to increase by USD 171.87 million\\u00a0from 2022 to 2027. The market's growth momentum will progress at\\u2026 [+9088 chars]\"\n    }\n  ]\n}\n\n\n\ndef string_cleaner(input_string):\n    try: \n        out=re.sub(r\"\"\"\n                    [,.;@#?!&$-]+  # Accept one or more copies of punctuation\n                    \\ *           # plus zero or more copies of a space,\n                    \"\"\",\n                    \" \",          # and replace it with a single space\n                    input_string, flags=re.VERBOSE)\n\n        #REPLACE SELECT CHARACTERS WITH NOTHING\n        out = re.sub('[’.]+', '', input_string)\n\n        #ELIMINATE DUPLICATE WHITESPACES USING WILDCARDS\n        out = re.sub(r'\\s+', ' ', out)\n\n        #CONVERT TO LOWER CASE\n        out=out.lower()\n    except:\n        print(\"ERROR\")\n        out=''\n    return out\n\n\narticle_list=response['articles']   #list of dictionaries for each article\narticle_keys=article_list[0].keys()\nprint(\"AVAILABLE KEYS:\")\nprint(article_keys)\nindex=0\ncleaned_data=[];  \nfor article in article_list:\n    tmp=[]\n    if(verbose):\n        print(\"#------------------------------------------\")\n        print(\"#\",index)\n        print(\"#------------------------------------------\")\n\n    for key in article_keys:\n        if(verbose):\n            print(\"----------------\")\n            print(key)\n            print(article[key])\n            print(\"----------------\")\n\n        if(key=='source'):\n            src=string_cleaner(article[key]['name'])\n            tmp.append(src) \n\n        if(key=='author'):\n            author=string_cleaner(article[key])\n            #ERROR CHECK (SOMETIMES AUTHOR IS SAME AS PUBLICATION)\n            if(src in author): \n                print(\" AUTHOR ERROR:\",author);author='NA'\n            tmp.append(author)\n\n        if(key=='title'):\n             tmp.append(string_cleaner(article[key]))\n\n        if(key=='description'):\n            tmp.append(string_cleaner(article[key]))\n\n        # if(key=='content'):\n        #     tmp.append(string_cleaner(article[key]))\n\n        if(key=='publishedAt'):\n            #DEFINE DATA PATERN FOR RE TO CHECK  .* --&gt; wildcard\n            ref = re.compile('.*-.*-.*T.*:.*:.*Z')\n            date=article[key]\n            if(not ref.match(date)):\n                print(\" DATE ERROR:\",date); date=\"NA\"\n            tmp.append(date)\n\n    cleaned_data.append(tmp)\n    index+=1\n\n\nAVAILABLE KEYS:\ndict_keys(['source', 'author', 'title', 'description', 'url', 'urlToImage', 'publishedAt', 'content'])\n#------------------------------------------\n# 0\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'Forbes'}\n----------------\n----------------\nauthor\nZinnia Lee, Forbes Staff, \n Zinnia Lee, Forbes Staff\n https://www.forbes.com/sites/zinnialee/\n----------------\n AUTHOR ERROR: zinnia lee, forbes staff, zinnia lee, forbes staff https://wwwforbescom/sites/zinnialee/\n----------------\ntitle\nThis Social Enterprise Backed By Swire And Nan Fung’s Chen Family Is Teaching Emotional Education In Exam-Obsessed Hong Kong\n----------------\n----------------\ndescription\nThe lack of emotional education in Hong Kong's exam-oriented system inspired Anthony Ngai, Matthew Kwok and Raymond Yang to establish Just Feel.\n----------------\n----------------\nurl\nhttps://www.forbes.com/sites/zinnialee/2023/09/04/this-social-enterprise-backed-by-swire-and-nan-fungs-chen-family-is-teaching-emotional-education-in-exam-obsessed-hong-kong/\n----------------\n----------------\nurlToImage\nhttps://imageio.forbes.com/specials-images/imageserve/64ef0f6fb3f3f3e2a24af6bd/0x0.jpg?format=jpg&crop=2861,1609,x0,y0,safe&width=1200\n----------------\n----------------\npublishedAt\n2023-09-05T03:00:43Z\n----------------\n----------------\ncontent\nJust Feel cofounders (left to right): Anthony Ngai, Matthew Kwok and Raymond Yang.\nJust Feel\nDuring their time serving as teaching fellows at elementary schools in Hong Kong, Matthew Kwok and Raymo… [+4216 chars]\n----------------\n#------------------------------------------\n# 1\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'PRNewswire'}\n----------------\n----------------\nauthor\nNone\n----------------\nERROR\n----------------\ntitle\nJockey Club closes Philanthropy for Better Cities Forum with call for global multi-level collaboration in quest for fairer societies\n----------------\n----------------\ndescription\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the West Kowloon Cultural District in Hong Kong. The two-day forum …\n----------------\n----------------\nurl\nhttps://www.prnewswire.com/news-releases/jockey-club-closes-philanthropy-for-better-cities-forum-with-call-for-global-multi-level-collaboration-in-quest-for-fairer-societies-301924908.html\n----------------\n----------------\nurlToImage\nhttps://mma.prnewswire.com/media/2208533/P1_20230912_PBC_Closing.jpg?p=facebook\n----------------\n----------------\npublishedAt\n2023-09-12T14:12:00Z\n----------------\n----------------\ncontent\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the Wes… [+4860 chars]\n----------------\n#------------------------------------------\n# 2\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'PRNewswire'}\n----------------\n----------------\nauthor\nNone\n----------------\nERROR\n----------------\ntitle\nJockey Club announces Institute of Philanthropy - bringing together local, regional and global thought leadership for the betterment of society\n----------------\n----------------\ndescription\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\"IoP\") at the opening of the Philanthropy for Better Cities Forum 2023 today (11 September) at the West Kowloon Cultural District…\n----------------\n----------------\nurl\nhttps://www.prnewswire.com/news-releases/jockey-club-announces-institute-of-philanthropy---bringing-together-local-regional-and-global-thought-leadership-for-the-betterment-of-society-301924097.html\n----------------\n----------------\nurlToImage\nhttps://mma.prnewswire.com/media/2208074/P1_20230911_PBC_IOP.jpg?p=facebook\n----------------\n----------------\npublishedAt\n2023-09-12T04:48:00Z\n----------------\n----------------\ncontent\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\"IoP\") at the opening of the Philanthropy for Better Cities Forum 202… [+4780 chars]\n----------------\n#------------------------------------------\n# 3\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'Dezeen'}\n----------------\n----------------\nauthor\nDezeen staff\n----------------\n AUTHOR ERROR: dezeen staff\n----------------\ntitle\nEight projects by students at Hong Kong Design Institute\n----------------\n----------------\ndescription\nDezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. Also included is a greyscale cityscape comprised of photographs of iconi…\n----------------\n----------------\nurl\nhttps://www.dezeen.com/2023/09/28/hong-kong-design-institute-jewellery-interiors-design-projects-schoolshows/\n----------------\n----------------\nurlToImage\nhttps://static.dezeen.com/uploads/2023/09/hong-kong-design-institute-dezeen-schoolshows_dezeen_2364_col_3-copy-600x600.jpg\n----------------\n----------------\npublishedAt\n2023-09-28T16:26:56Z\n----------------\n----------------\ncontent\nDezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. \nAlso inclu… [+6956 chars]\n----------------\n#------------------------------------------\n# 4\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'PRNewswire'}\n----------------\n----------------\nauthor\nNone\n----------------\nERROR\n----------------\ntitle\nHorse and sports betting market to grow by USD 171.87 million from 2022 to 2027 | Increasing digital connectivity drives market growth - Technavio\n----------------\n----------------\ndescription\nNEW YORK, Aug. 29, 2023 /PRNewswire/ -- The global horse and sports betting market size is estimated to increase by USD 171.87 million from 2022 to 2027. The market's growth momentum will progress at a CAGR of 9.64%. Increasing digital connectivity drives the…\n----------------\n----------------\nurl\nhttps://www.prnewswire.com/news-releases/horse-and-sports-betting-market-to-grow-by-usd-171-87-million-from-2022-to-2027--increasing-digital-connectivity-drives-market-growth---technavio-301911871.html\n----------------\n----------------\nurlToImage\nhttps://mma.prnewswire.com/media/2195907/20230822074457_bw_2023_v1.jpg?p=facebook\n----------------\n----------------\npublishedAt\n2023-08-29T09:30:00Z\n----------------\n----------------\ncontent\nNEW YORK, Aug. 29, 2023 /PRNewswire/ -- The global horse and sports betting market size is estimated to increase by USD 171.87 million from 2022 to 2027. The market's growth momentum will progress at… [+9088 chars]\n----------------\n\n\n\nimport numpy as np\ndf = pd.DataFrame(cleaned_data)\ntitle = str(np.array(df[2]))\ndescr = str(np.array(df[3]))\ntext = title + descr\ntext = text.replace('\"', '')\ntext = text.replace(\"'\",\"\")\ntext = text.replace(\".\",\"\")"
  },
  {
    "objectID": "cleaning/text.html#setting-up-an-api-for-hkjc-racing-news",
    "href": "cleaning/text.html#setting-up-an-api-for-hkjc-racing-news",
    "title": "Text Data Cleaning",
    "section": "",
    "text": "import requests\nimport json\nimport re\nimport pandas as pd\nfrom sklearn.feature_extraction.text import CountVectorizer\n\n\nbaseURL = \"https://newsapi.org/v2/everything?\"\ntotal_requests=2\nverbose=True\nAPI_KEY='c42b8e84aab24c85af001b27015206b3'\nTOPIC='Hong Kong Jockey Club'\n\n\nURLpost = {'apiKey': API_KEY,\n            'q': '+'+TOPIC,\n            'sortBy': 'relevancy',\n            'totalRequests': 1}\n\nprint(baseURL)\n# print(URLpost)\n\n#GET DATA FROM API\nresponse = requests.get(baseURL, URLpost) #request data from the server\n# print(response.url);  \nresponse = response.json() #extract txt data from request into json\n\nprint(json.dumps(response, indent=2))\n\n# #GET TIMESTAMP FOR PULL REQUEST\nfrom datetime import datetime\ntimestamp = datetime.now().strftime(\"%Y-%m-%d-H%H-M%M-S%S\")\n\n# SAVE TO FILE \nwith open(timestamp+'-newapi-raw-data.json', 'w') as outfile:\n    json.dump(response, outfile, indent=4)\n\nhttps://newsapi.org/v2/everything?\n{\n  \"status\": \"ok\",\n  \"totalResults\": 5,\n  \"articles\": [\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"Forbes\"\n      },\n      \"author\": \"Zinnia Lee, Forbes Staff, \\n Zinnia Lee, Forbes Staff\\n https://www.forbes.com/sites/zinnialee/\",\n      \"title\": \"This Social Enterprise Backed By Swire And Nan Fung\\u2019s Chen Family Is Teaching Emotional Education In Exam-Obsessed Hong Kong\",\n      \"description\": \"The lack of emotional education in Hong Kong's exam-oriented system inspired Anthony Ngai, Matthew Kwok and Raymond Yang to establish Just Feel.\",\n      \"url\": \"https://www.forbes.com/sites/zinnialee/2023/09/04/this-social-enterprise-backed-by-swire-and-nan-fungs-chen-family-is-teaching-emotional-education-in-exam-obsessed-hong-kong/\",\n      \"urlToImage\": \"https://imageio.forbes.com/specials-images/imageserve/64ef0f6fb3f3f3e2a24af6bd/0x0.jpg?format=jpg&crop=2861,1609,x0,y0,safe&width=1200\",\n      \"publishedAt\": \"2023-09-05T03:00:43Z\",\n      \"content\": \"Just Feel cofounders (left to right): Anthony Ngai, Matthew Kwok and Raymond Yang.\\r\\nJust Feel\\r\\nDuring their time serving as teaching fellows at elementary schools in Hong Kong, Matthew Kwok and Raymo\\u2026 [+4216 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"PRNewswire\"\n      },\n      \"author\": null,\n      \"title\": \"Jockey Club closes Philanthropy for Better Cities Forum with call for global multi-level collaboration in quest for fairer societies\",\n      \"description\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the West Kowloon Cultural District in Hong Kong. The two-day forum \\u2026\",\n      \"url\": \"https://www.prnewswire.com/news-releases/jockey-club-closes-philanthropy-for-better-cities-forum-with-call-for-global-multi-level-collaboration-in-quest-for-fairer-societies-301924908.html\",\n      \"urlToImage\": \"https://mma.prnewswire.com/media/2208533/P1_20230912_PBC_Closing.jpg?p=facebook\",\n      \"publishedAt\": \"2023-09-12T14:12:00Z\",\n      \"content\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the Wes\\u2026 [+4860 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"PRNewswire\"\n      },\n      \"author\": null,\n      \"title\": \"Jockey Club announces Institute of Philanthropy - bringing together local, regional and global thought leadership for the betterment of society\",\n      \"description\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\\\"IoP\\\") at the opening of the Philanthropy for Better Cities Forum 2023 today (11 September) at the West Kowloon Cultural District\\u2026\",\n      \"url\": \"https://www.prnewswire.com/news-releases/jockey-club-announces-institute-of-philanthropy---bringing-together-local-regional-and-global-thought-leadership-for-the-betterment-of-society-301924097.html\",\n      \"urlToImage\": \"https://mma.prnewswire.com/media/2208074/P1_20230911_PBC_IOP.jpg?p=facebook\",\n      \"publishedAt\": \"2023-09-12T04:48:00Z\",\n      \"content\": \"HONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\\\"IoP\\\") at the opening of the Philanthropy for Better Cities Forum 202\\u2026 [+4780 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"Dezeen\"\n      },\n      \"author\": \"Dezeen staff\",\n      \"title\": \"Eight projects by students at Hong Kong Design Institute\",\n      \"description\": \"Dezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. Also included is a greyscale cityscape comprised of photographs of iconi\\u2026\",\n      \"url\": \"https://www.dezeen.com/2023/09/28/hong-kong-design-institute-jewellery-interiors-design-projects-schoolshows/\",\n      \"urlToImage\": \"https://static.dezeen.com/uploads/2023/09/hong-kong-design-institute-dezeen-schoolshows_dezeen_2364_col_3-copy-600x600.jpg\",\n      \"publishedAt\": \"2023-09-28T16:26:56Z\",\n      \"content\": \"Dezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. \\r\\nAlso inclu\\u2026 [+6956 chars]\"\n    },\n    {\n      \"source\": {\n        \"id\": null,\n        \"name\": \"PRNewswire\"\n      },\n      \"author\": null,\n      \"title\": \"Horse and sports betting market to grow by USD 171.87 million from 2022 to 2027 | Increasing digital connectivity drives market growth - Technavio\",\n      \"description\": \"NEW YORK, Aug. 29, 2023 /PRNewswire/ -- The global horse and sports betting market size is estimated to increase by USD 171.87 million from 2022 to 2027. The market's growth momentum will progress at a CAGR of 9.64%. Increasing digital connectivity drives the\\u2026\",\n      \"url\": \"https://www.prnewswire.com/news-releases/horse-and-sports-betting-market-to-grow-by-usd-171-87-million-from-2022-to-2027--increasing-digital-connectivity-drives-market-growth---technavio-301911871.html\",\n      \"urlToImage\": \"https://mma.prnewswire.com/media/2195907/20230822074457_bw_2023_v1.jpg?p=facebook\",\n      \"publishedAt\": \"2023-08-29T09:30:00Z\",\n      \"content\": \"NEW YORK, Aug. 29, 2023 /PRNewswire/ -- The\\u00a0global horse and sports betting\\u00a0market size is estimated to increase by USD 171.87 million\\u00a0from 2022 to 2027. The market's growth momentum will progress at\\u2026 [+9088 chars]\"\n    }\n  ]\n}\n\n\n\ndef string_cleaner(input_string):\n    try: \n        out=re.sub(r\"\"\"\n                    [,.;@#?!&$-]+  # Accept one or more copies of punctuation\n                    \\ *           # plus zero or more copies of a space,\n                    \"\"\",\n                    \" \",          # and replace it with a single space\n                    input_string, flags=re.VERBOSE)\n\n        #REPLACE SELECT CHARACTERS WITH NOTHING\n        out = re.sub('[’.]+', '', input_string)\n\n        #ELIMINATE DUPLICATE WHITESPACES USING WILDCARDS\n        out = re.sub(r'\\s+', ' ', out)\n\n        #CONVERT TO LOWER CASE\n        out=out.lower()\n    except:\n        print(\"ERROR\")\n        out=''\n    return out\n\n\narticle_list=response['articles']   #list of dictionaries for each article\narticle_keys=article_list[0].keys()\nprint(\"AVAILABLE KEYS:\")\nprint(article_keys)\nindex=0\ncleaned_data=[];  \nfor article in article_list:\n    tmp=[]\n    if(verbose):\n        print(\"#------------------------------------------\")\n        print(\"#\",index)\n        print(\"#------------------------------------------\")\n\n    for key in article_keys:\n        if(verbose):\n            print(\"----------------\")\n            print(key)\n            print(article[key])\n            print(\"----------------\")\n\n        if(key=='source'):\n            src=string_cleaner(article[key]['name'])\n            tmp.append(src) \n\n        if(key=='author'):\n            author=string_cleaner(article[key])\n            #ERROR CHECK (SOMETIMES AUTHOR IS SAME AS PUBLICATION)\n            if(src in author): \n                print(\" AUTHOR ERROR:\",author);author='NA'\n            tmp.append(author)\n\n        if(key=='title'):\n             tmp.append(string_cleaner(article[key]))\n\n        if(key=='description'):\n            tmp.append(string_cleaner(article[key]))\n\n        # if(key=='content'):\n        #     tmp.append(string_cleaner(article[key]))\n\n        if(key=='publishedAt'):\n            #DEFINE DATA PATERN FOR RE TO CHECK  .* --&gt; wildcard\n            ref = re.compile('.*-.*-.*T.*:.*:.*Z')\n            date=article[key]\n            if(not ref.match(date)):\n                print(\" DATE ERROR:\",date); date=\"NA\"\n            tmp.append(date)\n\n    cleaned_data.append(tmp)\n    index+=1\n\n\nAVAILABLE KEYS:\ndict_keys(['source', 'author', 'title', 'description', 'url', 'urlToImage', 'publishedAt', 'content'])\n#------------------------------------------\n# 0\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'Forbes'}\n----------------\n----------------\nauthor\nZinnia Lee, Forbes Staff, \n Zinnia Lee, Forbes Staff\n https://www.forbes.com/sites/zinnialee/\n----------------\n AUTHOR ERROR: zinnia lee, forbes staff, zinnia lee, forbes staff https://wwwforbescom/sites/zinnialee/\n----------------\ntitle\nThis Social Enterprise Backed By Swire And Nan Fung’s Chen Family Is Teaching Emotional Education In Exam-Obsessed Hong Kong\n----------------\n----------------\ndescription\nThe lack of emotional education in Hong Kong's exam-oriented system inspired Anthony Ngai, Matthew Kwok and Raymond Yang to establish Just Feel.\n----------------\n----------------\nurl\nhttps://www.forbes.com/sites/zinnialee/2023/09/04/this-social-enterprise-backed-by-swire-and-nan-fungs-chen-family-is-teaching-emotional-education-in-exam-obsessed-hong-kong/\n----------------\n----------------\nurlToImage\nhttps://imageio.forbes.com/specials-images/imageserve/64ef0f6fb3f3f3e2a24af6bd/0x0.jpg?format=jpg&crop=2861,1609,x0,y0,safe&width=1200\n----------------\n----------------\npublishedAt\n2023-09-05T03:00:43Z\n----------------\n----------------\ncontent\nJust Feel cofounders (left to right): Anthony Ngai, Matthew Kwok and Raymond Yang.\nJust Feel\nDuring their time serving as teaching fellows at elementary schools in Hong Kong, Matthew Kwok and Raymo… [+4216 chars]\n----------------\n#------------------------------------------\n# 1\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'PRNewswire'}\n----------------\n----------------\nauthor\nNone\n----------------\nERROR\n----------------\ntitle\nJockey Club closes Philanthropy for Better Cities Forum with call for global multi-level collaboration in quest for fairer societies\n----------------\n----------------\ndescription\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the West Kowloon Cultural District in Hong Kong. The two-day forum …\n----------------\n----------------\nurl\nhttps://www.prnewswire.com/news-releases/jockey-club-closes-philanthropy-for-better-cities-forum-with-call-for-global-multi-level-collaboration-in-quest-for-fairer-societies-301924908.html\n----------------\n----------------\nurlToImage\nhttps://mma.prnewswire.com/media/2208533/P1_20230912_PBC_Closing.jpg?p=facebook\n----------------\n----------------\npublishedAt\n2023-09-12T14:12:00Z\n----------------\n----------------\ncontent\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The third Philanthropy for Better Cities Forum, convened by The Hong Kong Jockey Club Charities Trust, concluded successfully today (12 September) at the Wes… [+4860 chars]\n----------------\n#------------------------------------------\n# 2\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'PRNewswire'}\n----------------\n----------------\nauthor\nNone\n----------------\nERROR\n----------------\ntitle\nJockey Club announces Institute of Philanthropy - bringing together local, regional and global thought leadership for the betterment of society\n----------------\n----------------\ndescription\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\"IoP\") at the opening of the Philanthropy for Better Cities Forum 2023 today (11 September) at the West Kowloon Cultural District…\n----------------\n----------------\nurl\nhttps://www.prnewswire.com/news-releases/jockey-club-announces-institute-of-philanthropy---bringing-together-local-regional-and-global-thought-leadership-for-the-betterment-of-society-301924097.html\n----------------\n----------------\nurlToImage\nhttps://mma.prnewswire.com/media/2208074/P1_20230911_PBC_IOP.jpg?p=facebook\n----------------\n----------------\npublishedAt\n2023-09-12T04:48:00Z\n----------------\n----------------\ncontent\nHONG KONG, Sept. 12, 2023 /PRNewswire/ -- The Hong Kong Jockey Club announced the establishment of the Institute of Philanthropy (\"IoP\") at the opening of the Philanthropy for Better Cities Forum 202… [+4780 chars]\n----------------\n#------------------------------------------\n# 3\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'Dezeen'}\n----------------\n----------------\nauthor\nDezeen staff\n----------------\n AUTHOR ERROR: dezeen staff\n----------------\ntitle\nEight projects by students at Hong Kong Design Institute\n----------------\n----------------\ndescription\nDezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. Also included is a greyscale cityscape comprised of photographs of iconi…\n----------------\n----------------\nurl\nhttps://www.dezeen.com/2023/09/28/hong-kong-design-institute-jewellery-interiors-design-projects-schoolshows/\n----------------\n----------------\nurlToImage\nhttps://static.dezeen.com/uploads/2023/09/hong-kong-design-institute-dezeen-schoolshows_dezeen_2364_col_3-copy-600x600.jpg\n----------------\n----------------\npublishedAt\n2023-09-28T16:26:56Z\n----------------\n----------------\ncontent\nDezeen School Shows: a collection of silver jewellery informed by the process of making a phone call is included in Dezeen's latest school show by students at Hong Kong Design Institute. \nAlso inclu… [+6956 chars]\n----------------\n#------------------------------------------\n# 4\n#------------------------------------------\n----------------\nsource\n{'id': None, 'name': 'PRNewswire'}\n----------------\n----------------\nauthor\nNone\n----------------\nERROR\n----------------\ntitle\nHorse and sports betting market to grow by USD 171.87 million from 2022 to 2027 | Increasing digital connectivity drives market growth - Technavio\n----------------\n----------------\ndescription\nNEW YORK, Aug. 29, 2023 /PRNewswire/ -- The global horse and sports betting market size is estimated to increase by USD 171.87 million from 2022 to 2027. The market's growth momentum will progress at a CAGR of 9.64%. Increasing digital connectivity drives the…\n----------------\n----------------\nurl\nhttps://www.prnewswire.com/news-releases/horse-and-sports-betting-market-to-grow-by-usd-171-87-million-from-2022-to-2027--increasing-digital-connectivity-drives-market-growth---technavio-301911871.html\n----------------\n----------------\nurlToImage\nhttps://mma.prnewswire.com/media/2195907/20230822074457_bw_2023_v1.jpg?p=facebook\n----------------\n----------------\npublishedAt\n2023-08-29T09:30:00Z\n----------------\n----------------\ncontent\nNEW YORK, Aug. 29, 2023 /PRNewswire/ -- The global horse and sports betting market size is estimated to increase by USD 171.87 million from 2022 to 2027. The market's growth momentum will progress at… [+9088 chars]\n----------------\n\n\n\nimport numpy as np\ndf = pd.DataFrame(cleaned_data)\ntitle = str(np.array(df[2]))\ndescr = str(np.array(df[3]))\ntext = title + descr\ntext = text.replace('\"', '')\ntext = text.replace(\"'\",\"\")\ntext = text.replace(\".\",\"\")"
  },
  {
    "objectID": "cleaning/text.html#here-is-a-word-cloud-to-take-a-glimpse-into-the-text-data",
    "href": "cleaning/text.html#here-is-a-word-cloud-to-take-a-glimpse-into-the-text-data",
    "title": "Text Data Cleaning",
    "section": "Here is a Word Cloud to take a glimpse into the text data",
    "text": "Here is a Word Cloud to take a glimpse into the text data\n\ndef generate_word_cloud(my_text):\n    from wordcloud import WordCloud, STOPWORDS\n    import matplotlib.pyplot as plt\n    # exit()\n    # Import package\n    # Define a function to plot word cloud\n    def plot_cloud(wordcloud):\n        # Set figure size\n        plt.figure(figsize=(40, 30))\n        # Display image\n        plt.imshow(wordcloud) \n        # No axis details\n        plt.axis(\"off\");\n\n    # Generate word cloud\n    wordcloud = WordCloud(\n        width = 3000,\n        height = 2000, \n        random_state=1, \n        background_color='salmon', \n        colormap='Pastel1', \n        collocations=False,\n        stopwords = STOPWORDS).generate(my_text)\n    plot_cloud(wordcloud)\n    plt.show()\n\n    \ngenerate_word_cloud(text)"
  },
  {
    "objectID": "cleaning/text.html#count-vectorizer",
    "href": "cleaning/text.html#count-vectorizer",
    "title": "Text Data Cleaning",
    "section": "Count Vectorizer",
    "text": "Count Vectorizer\n\nfrom sklearn.feature_extraction.text import CountVectorizer\ncorpus = text.split()\nvectorizer = CountVectorizer()\nXs = vectorizer.fit_transform(corpus)\n\n\nprint(\"vocabulary = \", vectorizer.vocabulary_)\n\nvocabulary =  {'this': 129, 'social': 117, 'enterprise': 46, 'backed': 15, 'by': 20, 'swire': 123, 'and': 9, 'nan': 93, 'fungs': 57, 'chen': 24, 'family': 52, 'is': 73, 'teaching': 125, 'emotional': 45, 'education': 43, 'in': 65, 'exam': 50, 'obsessed': 96, 'hong': 62, 'kong': 77, 'jockey': 75, 'club': 28, 'closes': 27, 'philanthropy': 100, 'for': 54, 'better': 16, 'cities': 25, 'forum': 55, 'with': 139, 'call': 22, 'global': 58, 'multi': 92, 'level': 84, 'collaboration': 29, 'quest': 107, 'fairer': 51, 'societies': 118, 'announces': 11, 'institute': 71, 'of': 97, 'bringing': 19, 'together': 133, 'local': 85, 'regional': 109, 'thought': 130, 'leadership': 83, 'the': 127, 'betterment': 17, 'society': 119, 'eight': 44, 'projects': 106, 'students': 121, 'at': 13, 'design': 37, 'horse': 63, 'sports': 120, 'betting': 18, 'market': 87, 'to': 131, 'grow': 60, 'usd': 136, '17187': 2, 'million': 90, 'from': 56, '2022': 3, '2027': 5, 'increasing': 68, 'digital': 40, 'connectivity': 33, 'drives': 42, 'growth': 61, 'technavio': 126, 'lack': 81, 'kongs': 78, 'oriented': 99, 'system': 124, 'inspired': 70, 'anthony': 12, 'ngai': 95, 'matthew': 89, 'kwok': 80, 'raymond': 108, 'yang': 140, 'establish': 47, 'just': 76, 'feel': 53, 'sept': 111, '12': 1, '2023': 4, 'prnewswire': 103, 'third': 128, 'convened': 34, 'charities': 23, 'trust': 134, 'concluded': 32, 'successfully': 122, 'today': 132, 'september': 112, 'west': 137, 'kowloon': 79, 'cultural': 35, 'district': 41, 'two': 135, 'day': 36, 'announced': 10, 'establishment': 48, 'iop': 72, 'opening': 98, '11': 0, 'dezeen': 38, 'school': 110, 'shows': 114, 'collection': 30, 'silver': 115, 'jewellery': 74, 'informed': 69, 'process': 104, 'making': 86, 'phone': 101, 'included': 66, 'dezeens': 39, 'latest': 82, 'show': 113, 'also': 8, 'greyscale': 59, 'cityscape': 26, 'comprised': 31, 'photographs': 102, 'iconi': 64, 'new': 94, 'york': 141, 'aug': 14, '29': 6, 'size': 116, 'estimated': 49, 'increase': 67, 'markets': 88, 'momentum': 91, 'will': 138, 'progress': 105, 'cagr': 21, '964': 7}\n\n\nOnce again for the grader: I will clean this up way more in the future and add more description on what I am doing. For now, I am trying to just lay the groundwork."
  },
  {
    "objectID": "introduction/introduction.html",
    "href": "introduction/introduction.html",
    "title": "Introduction",
    "section": "",
    "text": "In this project, I will be exploring the factors that influence the performance of horses at the Hong Kong Jockey Club’s Happy Valley and Sha Tin racing tracks.\n\n\nHorse racing has long been a tradition in Hong Kong. Hong Kong is one of China’s two special adminstrative regions, along with Macao, that existed as a British Colony from 1841 until its handover to China on July 1, 1997. Macao, Hong Kong’s Portuguese-founded sister state (transfered to China in 1999 (Nations 1999)), is often remarked as the “gambling capital of world” (grossing nearly $5.3 billion USD in gaming/gambling revenue in 2022 (Statista 2022)), but many people overlook Hong Kong’s gaming history and culture. In the 1840s, Great Britain introduced horse racing to the people of Hong Kong, quickly becoming a staple of entertainment, sporting, and high-class social status within the colony.\nIn 1884, the Hong Kong Jockey Club (HKJC) was founded as an amatuer body to promote horse racing within Hong Kong. After existing for almost a century, HKJC evolved into a professional institution in 1971 (Cheung 2019). Even with the handover of the region to China in 1997, HKJC still stands as the only government-granted monopoly for horse racing in Hong Kong. While the handover of the region did cause a brief decline in racing and gaming activity due to poor economic conditions, horse racing in the 21st century has soared at the HJKC. In the 2022-2023 racing season alone, the club achieved a record turnover of HK$305.6 billion ($39.1 billion USD) (HKJC 2022) also donated a record HK$7.3 billion ($930 million) to charity, cementing itself as a top ten charitable foundation in the world. HKJC’s commitment to their community and charitable action make it one of the most uniquely spirited gaming institutions in the entire world.\n\n\n\nHKJC’s horse racing betting market is one that is largely foreign to the legalized sports gaming sphere that was newly introduced to the United States in 2021. With US sportsbooks, like Draftkings, FanDuel, BetMGM, etc., users place their bets on sporting events through the sportsbooks’ betting platforms (website or mobile app) according to odds (also known as “lines”) set by the sportsbooks. These lines are determined (fixed) by the sportbook, and if the user’s bet wins, they are paid according to the odds fixed by the sportsbook. On the contrary, if the user loses, the money wagered by the user entirely goes to the sportsbook. While this is one of the most common way sportsbooks and casinos operate around the world, many horse racing promoters and gaming companies, including HJKC, utilize what is called Pari-Mutuel Betting.\nPari-mutuel betting, unlike fixed odds wagering, is a system where users, instead of betting against the bookmakers, are essentially betting against other bettors. Discussed in the widely renowned 1988 paper titled “Anomalies: Parimutel Betting Markets: Racetracks and Lotteries”, written by world-leading experts in behavioral economics and finance, Richard Thaler and William T. Ziemba (Thaler and Ziemba 1988), pari-mutuel systems are betting systems in which all bets are placed into a pool and then dividends are awared based on the number of bets taken and the total amount wagered, in the case of horse racing, total number of bets and total amount wagered on a horse to win. The bookmaker, HKJC in our case, takes a portion, a “takeout”, from the pool and then pays out winning users proportionally to the amount of bets/total amount wagered on the winning outcome compared to the rest of the field. For this reason, pari-mutel betting is often called “pool betting”.\nPari-mutuel payoffs are determined by three factors (Criscola 2023):\n\nThe amount of money placed on the winning horse or combination of horses\nThe track takeout\nBreakage\n\nTypically you will see horse racing bookmakers take between a 16% and 20% takeout from the pool (a number established internally by the bookmakers). Breakage, desribes the process in which payoffs are rounded down to the nearest dime, a practice that is common in most jurisdictions where horse racing is legal. Looking at a theoretical example of how payouts/odds, takeouts, and breakage work, if 40% of the win pool is wagered on one horse, the wagering public would effectively be saying that the horse in question is a 3:2 proposition. But factor in the track takeout, and that potential payoff would drop to 4:3 (which would display as 1:1, or even money, on your screen). Then breakage could take away up to nine cents per every $2 wagered.\nYou can probably see how pari-mutuel pricing and odds can get pretty complex, pretty quick, especially when one is betting on mulitple horse placements, either in a specific finishing order or in any finishing order. While this topic is certainly intersting, especially with respects to game theory, it is not neccesarily the focus of this project. While the outcomes of this project may lead to exploration in advanced betting systems in a pari-mutuel horse racing market, it is not going to be of major focus throughout the exploration of this project. This section is intended to lay the groundwork for the rationale behind this project and the reasonings behind why this project is specifically concerning itself with horse racing in Hong Kong.\n\n\n\nAs you can see, the pari-mutuel system in which HKJC operates is unique. With HKJC taking a portion of the betting pool for every race, they are guranteed a profit for each race they host, no matter the outcome. This system is different from fixed-odds bookmakers who face the risk of losing money on any given matchup (these bookmakers do intentionally overinflate their odds, adding a “vigorish” to the lines, in order to maximize the attainability of profit, but again, that is out of the scope of this project). Because of this unique characteristic, Hong Kong horse racing can be a widely profitable sport to bet on. This fact is true for two main reasons:\n\nIncreased market ineffciencies due to the biases of the “uninfomred” betting public\nThe robust existence of publicly-available past performance data\n\nThe first point points to the fact that because the odds for each race are essentially being set by the betting public, there leaves room in each of the odds for payouts that are innacurate to the true probability of specific race events/outcomes to occur. In a 2008 paper (originally published in 1994) titled “Computer Based Horse Race Handicapping and Wagering Systems: A Report” written by Bill Benter (Benter 2008) (who is widely considered the most succesful sports handicapper of all time), the author points to the fact that while the public on the whole tends to come pretty close to the true probabilites associated with outcomes in horse racing with their probability estimates (the dispersion of wagers in the betting pool), they do have a slight margin of error that creates slight market ineffciencies. These market ineffciences can be found and exploited with the creation of a computerized handicapping model that seeks to predict horse racing outcomes. It is for this core reason that this project is being pursued. With an exploration of the foundational analytical insights that are attached to horse racing, which will be achieved through this project, an accurate advanced handicapping model becomes one step closer to being realized.\nThe second point highlights the fact that HKJC provides data on every race it has ever hosted on both of its tracks, Happy Valley and Sha Tin (since they started tracking race statistics through computerization). HKJC’s reasoning for providing such data is simply due to the fact that it encourages more people to bet, which in turn allows them to have more of a takeout per pool. American sportsbooks directly profit off their users knowing as little as possible about the events they are betting on, while the contrary is true for HKJC and their horse racing events. Resultantly, HKJC sits on a uniquely rich mountain of data that anyone can use. With publicly-available access to a robust set of data with hundreds of features, it becomes immensely easier and more accesible to not only making an advanced betting model, but also for conducting any analytics in general surrounding horse racing. This fact is another reason why I am choosing to look at Hong Kong horse racing over horse racing anywhere else in the world.\nOn top of these points, there is not a lot of existing publicly-available literature surrounding horse racing in Hong Kong. The literature that does exist is either outdated, or is a largley unprofessional post on blog sites or Git Hub. The lack of literature shows that there is a large gap in research surrounding horse racing in pari-mutuel systems in general, providing further validity to this project.\nAgain, while this project will not directly develop an advanced betting system, it is intended that will it serve as some of the early foundation for such a system. Through findings gleaned from this project, more advanced machine learning technqiues and predictive mathematics may be explored. This project will help open a window of opportunity for a more advanced and focused exploration of horse racing and game theory.\n\n\n\nWith all the above background information, this project intends to explore the following 10 questions:\n\nWhat factors are most important in determining if a horse wins a race?\nDoes a difference in declared weight of a horse versus its actual weight play at all into if the horse wins?\nDoes draw (which gate the horse starts out of) impact a horses’s finishing position. If so, to what extent?\nDo some horses perform better on turf or grass tracks?\nDo certain breeds of horses perform better than others?\nDo past race placments give any insight to future placments?\nDo horses in their “rookie” seasons perform better or worse than the rest of the field?\nHow much do the closing odds determine where a horse finishes?\nHow much does horse “rating” come into play when trying to determine horse performance?\nTo what extent do past length-behind-winner measurements determine horse perfomance?\n\n\n\n\n\nBenter, William. 2008. “Computer Based Horse Race Handicapping and Wagering Systems: A Report.” In Efficiency of Racetrack Betting Markets, 183–98. World Scientific.\n\n\nCheung, Vincent. 2019. “A Brief History of Hong Kong Horse Racing.” Webpage. https://www.cathaypacific.com/cx/en_HK/inspiration/hong-kong/brief-history-hong-kong-horse-racing.html#:~:text=Horse%20racing%20was%20brought%20to,the%20city's%20two%20racecourses%20in.\n\n\nCriscola, Robert. 2023. “Pari-Mutuel Betting Guide: Learn How to Bet on Horse Racing Like a Pro.” Webpage. https://www.covers.com/horse-racing/pari-mutuel-betting-guide.\n\n\nHKJC. 2022. “The Hong Kong Jockey Club 2022/23 Annual Report.” Webpage. https://corporate.hkjc.com/corporate/english/history-and-reports/annual-reports.aspx.\n\n\nNations, One World. 1999. Webpage. https://www.nationsonline.org/oneworld/macau.htm#:~:text=Colonized%20by%20the%20Portuguese%20in,China%20on%2020%20December%201999..\n\n\nStatista. 2022. “Number of Casinos in Macao from 2012 to 2022.” Webpage. https://www.statista.com/statistics/253763/number-of-casinos-in-macao/#:~:text=Macao%2C%20the%20world's%20casino%20capital,dollars%20from%20gaming%20and%20gambling.\n\n\nThaler, Richard H, and William T Ziemba. 1988. “Anomalies: Parimutuel Betting Markets: Racetracks and Lotteries.” Journal of Economic Perspectives 2 (2): 161–74."
  },
  {
    "objectID": "introduction/introduction.html#a-brief-history",
    "href": "introduction/introduction.html#a-brief-history",
    "title": "Introduction",
    "section": "",
    "text": "Horse racing has long been a tradition in Hong Kong. Hong Kong is one of China’s two special adminstrative regions, along with Macao, that existed as a British Colony from 1841 until its handover to China on July 1, 1997. Macao, Hong Kong’s Portuguese-founded sister state (transfered to China in 1999 (Nations 1999)), is often remarked as the “gambling capital of world” (grossing nearly $5.3 billion USD in gaming/gambling revenue in 2022 (Statista 2022)), but many people overlook Hong Kong’s gaming history and culture. In the 1840s, Great Britain introduced horse racing to the people of Hong Kong, quickly becoming a staple of entertainment, sporting, and high-class social status within the colony.\nIn 1884, the Hong Kong Jockey Club (HKJC) was founded as an amatuer body to promote horse racing within Hong Kong. After existing for almost a century, HKJC evolved into a professional institution in 1971 (Cheung 2019). Even with the handover of the region to China in 1997, HKJC still stands as the only government-granted monopoly for horse racing in Hong Kong. While the handover of the region did cause a brief decline in racing and gaming activity due to poor economic conditions, horse racing in the 21st century has soared at the HJKC. In the 2022-2023 racing season alone, the club achieved a record turnover of HK$305.6 billion ($39.1 billion USD) (HKJC 2022) also donated a record HK$7.3 billion ($930 million) to charity, cementing itself as a top ten charitable foundation in the world. HKJC’s commitment to their community and charitable action make it one of the most uniquely spirited gaming institutions in the entire world."
  },
  {
    "objectID": "introduction/introduction.html#the-pari-mutuel-betting-market",
    "href": "introduction/introduction.html#the-pari-mutuel-betting-market",
    "title": "Introduction",
    "section": "",
    "text": "HKJC’s horse racing betting market is one that is largely foreign to the legalized sports gaming sphere that was newly introduced to the United States in 2021. With US sportsbooks, like Draftkings, FanDuel, BetMGM, etc., users place their bets on sporting events through the sportsbooks’ betting platforms (website or mobile app) according to odds (also known as “lines”) set by the sportsbooks. These lines are determined (fixed) by the sportbook, and if the user’s bet wins, they are paid according to the odds fixed by the sportsbook. On the contrary, if the user loses, the money wagered by the user entirely goes to the sportsbook. While this is one of the most common way sportsbooks and casinos operate around the world, many horse racing promoters and gaming companies, including HJKC, utilize what is called Pari-Mutuel Betting.\nPari-mutuel betting, unlike fixed odds wagering, is a system where users, instead of betting against the bookmakers, are essentially betting against other bettors. Discussed in the widely renowned 1988 paper titled “Anomalies: Parimutel Betting Markets: Racetracks and Lotteries”, written by world-leading experts in behavioral economics and finance, Richard Thaler and William T. Ziemba (Thaler and Ziemba 1988), pari-mutuel systems are betting systems in which all bets are placed into a pool and then dividends are awared based on the number of bets taken and the total amount wagered, in the case of horse racing, total number of bets and total amount wagered on a horse to win. The bookmaker, HKJC in our case, takes a portion, a “takeout”, from the pool and then pays out winning users proportionally to the amount of bets/total amount wagered on the winning outcome compared to the rest of the field. For this reason, pari-mutel betting is often called “pool betting”.\nPari-mutuel payoffs are determined by three factors (Criscola 2023):\n\nThe amount of money placed on the winning horse or combination of horses\nThe track takeout\nBreakage\n\nTypically you will see horse racing bookmakers take between a 16% and 20% takeout from the pool (a number established internally by the bookmakers). Breakage, desribes the process in which payoffs are rounded down to the nearest dime, a practice that is common in most jurisdictions where horse racing is legal. Looking at a theoretical example of how payouts/odds, takeouts, and breakage work, if 40% of the win pool is wagered on one horse, the wagering public would effectively be saying that the horse in question is a 3:2 proposition. But factor in the track takeout, and that potential payoff would drop to 4:3 (which would display as 1:1, or even money, on your screen). Then breakage could take away up to nine cents per every $2 wagered.\nYou can probably see how pari-mutuel pricing and odds can get pretty complex, pretty quick, especially when one is betting on mulitple horse placements, either in a specific finishing order or in any finishing order. While this topic is certainly intersting, especially with respects to game theory, it is not neccesarily the focus of this project. While the outcomes of this project may lead to exploration in advanced betting systems in a pari-mutuel horse racing market, it is not going to be of major focus throughout the exploration of this project. This section is intended to lay the groundwork for the rationale behind this project and the reasonings behind why this project is specifically concerning itself with horse racing in Hong Kong."
  },
  {
    "objectID": "introduction/introduction.html#project-rationale",
    "href": "introduction/introduction.html#project-rationale",
    "title": "Introduction",
    "section": "",
    "text": "As you can see, the pari-mutuel system in which HKJC operates is unique. With HKJC taking a portion of the betting pool for every race, they are guranteed a profit for each race they host, no matter the outcome. This system is different from fixed-odds bookmakers who face the risk of losing money on any given matchup (these bookmakers do intentionally overinflate their odds, adding a “vigorish” to the lines, in order to maximize the attainability of profit, but again, that is out of the scope of this project). Because of this unique characteristic, Hong Kong horse racing can be a widely profitable sport to bet on. This fact is true for two main reasons:\n\nIncreased market ineffciencies due to the biases of the “uninfomred” betting public\nThe robust existence of publicly-available past performance data\n\nThe first point points to the fact that because the odds for each race are essentially being set by the betting public, there leaves room in each of the odds for payouts that are innacurate to the true probability of specific race events/outcomes to occur. In a 2008 paper (originally published in 1994) titled “Computer Based Horse Race Handicapping and Wagering Systems: A Report” written by Bill Benter (Benter 2008) (who is widely considered the most succesful sports handicapper of all time), the author points to the fact that while the public on the whole tends to come pretty close to the true probabilites associated with outcomes in horse racing with their probability estimates (the dispersion of wagers in the betting pool), they do have a slight margin of error that creates slight market ineffciencies. These market ineffciences can be found and exploited with the creation of a computerized handicapping model that seeks to predict horse racing outcomes. It is for this core reason that this project is being pursued. With an exploration of the foundational analytical insights that are attached to horse racing, which will be achieved through this project, an accurate advanced handicapping model becomes one step closer to being realized.\nThe second point highlights the fact that HKJC provides data on every race it has ever hosted on both of its tracks, Happy Valley and Sha Tin (since they started tracking race statistics through computerization). HKJC’s reasoning for providing such data is simply due to the fact that it encourages more people to bet, which in turn allows them to have more of a takeout per pool. American sportsbooks directly profit off their users knowing as little as possible about the events they are betting on, while the contrary is true for HKJC and their horse racing events. Resultantly, HKJC sits on a uniquely rich mountain of data that anyone can use. With publicly-available access to a robust set of data with hundreds of features, it becomes immensely easier and more accesible to not only making an advanced betting model, but also for conducting any analytics in general surrounding horse racing. This fact is another reason why I am choosing to look at Hong Kong horse racing over horse racing anywhere else in the world.\nOn top of these points, there is not a lot of existing publicly-available literature surrounding horse racing in Hong Kong. The literature that does exist is either outdated, or is a largley unprofessional post on blog sites or Git Hub. The lack of literature shows that there is a large gap in research surrounding horse racing in pari-mutuel systems in general, providing further validity to this project.\nAgain, while this project will not directly develop an advanced betting system, it is intended that will it serve as some of the early foundation for such a system. Through findings gleaned from this project, more advanced machine learning technqiues and predictive mathematics may be explored. This project will help open a window of opportunity for a more advanced and focused exploration of horse racing and game theory."
  },
  {
    "objectID": "introduction/introduction.html#project-outline-and-direction",
    "href": "introduction/introduction.html#project-outline-and-direction",
    "title": "Introduction",
    "section": "",
    "text": "With all the above background information, this project intends to explore the following 10 questions:\n\nWhat factors are most important in determining if a horse wins a race?\nDoes a difference in declared weight of a horse versus its actual weight play at all into if the horse wins?\nDoes draw (which gate the horse starts out of) impact a horses’s finishing position. If so, to what extent?\nDo some horses perform better on turf or grass tracks?\nDo certain breeds of horses perform better than others?\nDo past race placments give any insight to future placments?\nDo horses in their “rookie” seasons perform better or worse than the rest of the field?\nHow much do the closing odds determine where a horse finishes?\nHow much does horse “rating” come into play when trying to determine horse performance?\nTo what extent do past length-behind-winner measurements determine horse perfomance?\n\n\n\n\n\nBenter, William. 2008. “Computer Based Horse Race Handicapping and Wagering Systems: A Report.” In Efficiency of Racetrack Betting Markets, 183–98. World Scientific.\n\n\nCheung, Vincent. 2019. “A Brief History of Hong Kong Horse Racing.” Webpage. https://www.cathaypacific.com/cx/en_HK/inspiration/hong-kong/brief-history-hong-kong-horse-racing.html#:~:text=Horse%20racing%20was%20brought%20to,the%20city's%20two%20racecourses%20in.\n\n\nCriscola, Robert. 2023. “Pari-Mutuel Betting Guide: Learn How to Bet on Horse Racing Like a Pro.” Webpage. https://www.covers.com/horse-racing/pari-mutuel-betting-guide.\n\n\nHKJC. 2022. “The Hong Kong Jockey Club 2022/23 Annual Report.” Webpage. https://corporate.hkjc.com/corporate/english/history-and-reports/annual-reports.aspx.\n\n\nNations, One World. 1999. Webpage. https://www.nationsonline.org/oneworld/macau.htm#:~:text=Colonized%20by%20the%20Portuguese%20in,China%20on%2020%20December%201999..\n\n\nStatista. 2022. “Number of Casinos in Macao from 2012 to 2022.” Webpage. https://www.statista.com/statistics/253763/number-of-casinos-in-macao/#:~:text=Macao%2C%20the%20world's%20casino%20capital,dollars%20from%20gaming%20and%20gambling.\n\n\nThaler, Richard H, and William T Ziemba. 1988. “Anomalies: Parimutuel Betting Markets: Racetracks and Lotteries.” Journal of Economic Perspectives 2 (2): 161–74."
  },
  {
    "objectID": "cleaning/cleaning.html",
    "href": "cleaning/cleaning.html",
    "title": "Data Cleaning",
    "section": "",
    "text": "horses&lt;-read.csv(\"../../../data/00-raw-data/horses.csv\")\nperformances&lt;-read.csv(\"../../../data/00-raw-data/performances.csv\")\n\n\n\n\nhead(horses,2)\n\n  horse_id       horse_name horse_name_zh\n1     L247     REAL SUPREME      天外之天\n2    44170 LIM'S INVINCIBLE      林家无敌\n                                                                         horse_url\n1 http://racing.hkjc.com/racing/info/horse/GetFilteredHorseFormRecord/english/L247\n2          http://www.turfclub.com.sg/Racing/Pages/HorseProfile.aspx?HorseID=44170\n  horse_country is_active country age             trainer_id   colour     sex\n1            HK      TRUE     AUS   9                    CCW Chestnut Gelding\n2            SG      TRUE     AUS   3 STEVEN HAROLD BURRIDGE                 \n                 owner_name\n1 Lai Ni Jan | Benvinda Lai\n2              LIM'S STABLE\n                                            owner_link import_type\n1 ownersearch.asp?horseowner=Lai Ni Jan | Benvinda Lai         ISG\n2                                                                 \n  current_rating season_stake start_of_season_rating total_stake\n1             34        37800                     39     6607700\n2             50           NA                     NA       38182\n                   sire\n1           Flying Spur\n2 I AM INVINCIBLE (AUS)\n                                                                           same_sire_url\n1 http://racing.hkjc.com/racing/info/Horse/SameSire/english/Rmx5aW5nIFNwdXIgICAgICAgICA=\n2                                                                                       \n  no_of_1_2_3                 dam no_of_start_past_10_meetings dam_sire\n1    8-5-6-75           Irgunette                            1    Irgun\n2             REIGNING CASH (AUS)                           NA         \n                         same_sire last_updated\n1 [\"T387\", \"M273\", \"T280\", \"V334\"]      08:18.0\n2                                       11:32.8\n\n\nWe are going to remove “horse_name_zh” which contains the horses’ names in Cantonese, “horse_url”, “owner_url”, “sire”, “no_of_start_past_10_meetings”, “dam”,“dam_sire”, “same_sire and”last_updated”. Note for grader: I will go into more depth why I am removing these in the future completion of this project.\n\nhorses.clean&lt;-horses[,-c(3,4,13,16,19,20,22,23,24,25,26)]\nhead(horses.clean,2)\n\n  horse_id       horse_name horse_country is_active country age\n1     L247     REAL SUPREME            HK      TRUE     AUS   9\n2    44170 LIM'S INVINCIBLE            SG      TRUE     AUS   3\n              trainer_id   colour     sex                owner_name import_type\n1                    CCW Chestnut Gelding Lai Ni Jan | Benvinda Lai         ISG\n2 STEVEN HAROLD BURRIDGE                               LIM'S STABLE            \n  current_rating start_of_season_rating total_stake no_of_1_2_3\n1             34                     39     6607700    8-5-6-75\n2             50                     NA       38182            \n\n\nWe are only interested in horses that run in Hong Kong while there are some horses in this data set that raced in Singapore.\n\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nhorses.clean&lt;-horses.clean%&gt;%\n  filter(horse_country == \"HK\")\n\nNow we want to clean “no_of_1_2_3”. This column represents how many 1st, 2nd, and 3rd place finishes the horse has ever had. The last number is the total number of races the horse has participated in. We are going to break up this column into seperate columns for placing finishes and number of races.\n\nlibrary(stringr)\n\nsplit1 &lt;-str_split_fixed(horses.clean$no_of_1_2_3, \"-\", 4)\nhorses.clean$first_place &lt;- split1[,1]\nhorses.clean$second_place &lt;- split1[,2]\nhorses.clean$third_place &lt;- split1[,3]\nhorses.clean$races &lt;- split1[,4]\n# Remove original column\nhorses.clean &lt;- horses.clean[,-15]\nhead(horses.clean,2)\n\n  horse_id     horse_name horse_country is_active country age trainer_id\n1     L247   REAL SUPREME            HK      TRUE     AUS   9        CCW\n2     T422 AMAZING MOMENT            HK      TRUE     AUS   6        OSP\n    colour     sex                owner_name import_type current_rating\n1 Chestnut Gelding Lai Ni Jan | Benvinda Lai         ISG             34\n2      Bay Gelding   Treinta Pares Syndicate          PP             60\n  start_of_season_rating total_stake first_place second_place third_place races\n1                     39     6607700           8            5           6    75\n2                     57     1337225           1            1           4    19\n\n\n\n\n\n\nhead(performances,2)\n\n  horse_id horse_name horse_name_zh horse_no race_id race_no race_date\n1    34204  LORD GREG     LORD GREG       NA      NA       0   00:00.0\n2    34204  LORD GREG     LORD GREG       NA      NA       0   00:00.0\n  race_country final_placing    season going rating jockey_id jockey_name\n1           SG             3 2006/2007     G     37  O CHAVEZ    O CHAVEZ\n2           SG             2 2006/2007     G     37 B VORSTER   B VORSTER\n  jockey_name_zh\n1         查维斯\n2         沃斯特\n                                                                                    jockey_url\n1  http://www.turfclub.com.sg/Industry/Jockeys/Pages/JockeyDirectoryDetails.aspx?Name=O+CHAVEZ\n2 http://www.turfclub.com.sg/Industry/Jockeys/Pages/JockeyDirectoryDetails.aspx?Name=B+VORSTER\n  trainer_id trainer_name trainer_name_zh\n1   O CHAVEZ      L LAXON            纳逊\n2  B VORSTER      L LAXON            纳逊\n                                                                                          trainer_url\n1 http://www.turfclub.com.sg/Industry/Trainers/Pages/TrainerDirectoryDetails.aspx?TrainerName=L+LAXON\n2 http://www.turfclub.com.sg/Industry/Trainers/Pages/TrainerDirectoryDetails.aspx?TrainerName=L+LAXON\n  winning_odds actual_weight running_positions finish_time on_date_weight gears\n1          2.6          53.5             7 7 3     1:24:50            497     B\n2          2.4          54.0             4 3 2 0.076736111            500     B\n  draw length_behind_winner race_class distance course race_location race_url\n1    6                 6.8L          5     1400                    S         \n2    2                 3.8L          5     1800                    S         \n  track sections sections_time last_updated\n1  Turf                             00:41.5\n2  Turf                             00:41.5\n\n\nWe are going to remove the column containing the Cantonese name for the horse, the date (as the data became corrupted through the original API and it is not necessarily important when we have the year of the season and measurements of the track quality to account for weather seasonality impacts on the track), jockey name in Cantonese, jockey url, trainer name in Cantonese, trainer url, race url, and last updated, and length behind winner. Length behind winner being deleted is okay because we have LBW for all 4 sections in another variable.\n\nperf.clean&lt;-performances[,-c(3,7,15,16,19,20,28,33,37)]\nhead(perf.clean,2)\n\n  horse_id horse_name horse_no race_id race_no race_country final_placing\n1    34204  LORD GREG       NA      NA       0           SG             3\n2    34204  LORD GREG       NA      NA       0           SG             2\n     season going rating jockey_id jockey_name trainer_id trainer_name\n1 2006/2007     G     37  O CHAVEZ    O CHAVEZ   O CHAVEZ      L LAXON\n2 2006/2007     G     37 B VORSTER   B VORSTER  B VORSTER      L LAXON\n  winning_odds actual_weight running_positions finish_time on_date_weight gears\n1          2.6          53.5             7 7 3     1:24:50            497     B\n2          2.4          54.0             4 3 2 0.076736111            500     B\n  draw race_class distance course race_location track sections sections_time\n1    6          5     1400                    S  Turf                       \n2    2          5     1800                    S  Turf                       \n\n\nWe are going to once again filter out any race in the dataset that happened in Singapore.\n\nperf.clean&lt;-perf.clean%&gt;%\n  filter(race_country == \"HK\")\n\nNow I am going to do one of the important parts of data cleaning for this analyis: Breaking the section data into 4 distinct columns, both for LBW and time.\n\n# Getting rid of brackets and commas in the columns\nperf.clean$sections &lt;- str_replace_all(perf.clean$sections,\"\\\\[|\\\\]|\\\\,|\\\\{\",\"\")\nperf.clean$sections &lt;- str_replace_all(perf.clean$sections,\"\\\\}\",\",\")\nperf.clean$sections_time &lt;- str_replace_all(perf.clean$sections_time,\"\\\\[|\\\\]|\\\\,|\\\\{\",\"\")\nperf.clean$sections_time &lt;- str_replace_all(perf.clean$sections_time,\"\\\\}\",\",\")\n\n\n# splitting each section into their own column\nsplit2 &lt;-str_split_fixed(perf.clean$sections,\",\",4)\nperf.clean$section1&lt;-split2[,1]\nperf.clean$section2&lt;-split2[,2]\nperf.clean$section3&lt;-split2[,3]\nperf.clean$section4&lt;-split2[,4]\n\n\n# same thing for section time\nsplit3 &lt;-str_split_fixed(perf.clean$sections_time,\",\",4)\nperf.clean$section1_time&lt;-split3[,1]\nperf.clean$section2_time&lt;-split3[,2]\nperf.clean$section3_time&lt;-split3[,3]\nperf.clean$section4_time&lt;-split3[,4]\n\n\nhead(perf.clean,2)\n\n  horse_id horse_name horse_no race_id race_no race_country final_placing\n1     A001 BURST AWAY        6     250       1           HK            11\n2     A001 BURST AWAY        6     313       6           HK            11\n     season going rating jockey_id jockey_name trainer_id trainer_name\n1 2016/2017     G     72        MG     G Mosse        MKL      K L Man\n2 2016/2017     G     72       YML   M L Yeung        MKL      K L Man\n  winning_odds actual_weight running_positions finish_time on_date_weight gears\n1           49           125            9 7 11     1.10.04           1083      \n2           30           124            4 3 11     1.11.86           1073      \n  draw race_class distance course race_location track\n1   13          3     1200      A            ST  Turf\n2    6          3     1200      A            HV  Turf\n                                                                                 sections\n1         \"lbw\": \"5-1/4\" \"placing\": 9, \"lbw\": \"3\" \"placing\": 7, \"lbw\": \"4\" \"placing\": 11,\n2 \"lbw\": \"2-1/4\" \"placing\": 4, \"lbw\": \"1-1/2\" \"placing\": 3, \"lbw\": \"6-1/2\" \"placing\": 11,\n                                       sections_time\n1 \"time\": \"24.21\", \"time\": \"22.03\", \"time\": \"23.80\",\n2 \"time\": \"23.73\", \"time\": \"23.61\", \"time\": \"24.52\",\n                     section1                     section2\n1 \"lbw\": \"5-1/4\" \"placing\": 9      \"lbw\": \"3\" \"placing\": 7\n2 \"lbw\": \"2-1/4\" \"placing\": 4  \"lbw\": \"1-1/2\" \"placing\": 3\n                       section3 section4   section1_time    section2_time\n1      \"lbw\": \"4\" \"placing\": 11          \"time\": \"24.21\"  \"time\": \"22.03\"\n2  \"lbw\": \"6-1/2\" \"placing\": 11          \"time\": \"23.73\"  \"time\": \"23.61\"\n     section3_time section4_time\n1  \"time\": \"23.80\"              \n2  \"time\": \"24.52\"              \n\n\nNote for grader:Unfortunately, this part is really weird because of data loss, so this will have to be further cleaned later on, most likely with the help of a professor. You can see that I attempted to break up the data into the 4 sections of the track but it got a little finicky."
  },
  {
    "objectID": "cleaning/cleaning.html#lets-start-by-cleaning-horses",
    "href": "cleaning/cleaning.html#lets-start-by-cleaning-horses",
    "title": "Data Cleaning",
    "section": "",
    "text": "head(horses,2)\n\n  horse_id       horse_name horse_name_zh\n1     L247     REAL SUPREME      天外之天\n2    44170 LIM'S INVINCIBLE      林家无敌\n                                                                         horse_url\n1 http://racing.hkjc.com/racing/info/horse/GetFilteredHorseFormRecord/english/L247\n2          http://www.turfclub.com.sg/Racing/Pages/HorseProfile.aspx?HorseID=44170\n  horse_country is_active country age             trainer_id   colour     sex\n1            HK      TRUE     AUS   9                    CCW Chestnut Gelding\n2            SG      TRUE     AUS   3 STEVEN HAROLD BURRIDGE                 \n                 owner_name\n1 Lai Ni Jan | Benvinda Lai\n2              LIM'S STABLE\n                                            owner_link import_type\n1 ownersearch.asp?horseowner=Lai Ni Jan | Benvinda Lai         ISG\n2                                                                 \n  current_rating season_stake start_of_season_rating total_stake\n1             34        37800                     39     6607700\n2             50           NA                     NA       38182\n                   sire\n1           Flying Spur\n2 I AM INVINCIBLE (AUS)\n                                                                           same_sire_url\n1 http://racing.hkjc.com/racing/info/Horse/SameSire/english/Rmx5aW5nIFNwdXIgICAgICAgICA=\n2                                                                                       \n  no_of_1_2_3                 dam no_of_start_past_10_meetings dam_sire\n1    8-5-6-75           Irgunette                            1    Irgun\n2             REIGNING CASH (AUS)                           NA         \n                         same_sire last_updated\n1 [\"T387\", \"M273\", \"T280\", \"V334\"]      08:18.0\n2                                       11:32.8\n\n\nWe are going to remove “horse_name_zh” which contains the horses’ names in Cantonese, “horse_url”, “owner_url”, “sire”, “no_of_start_past_10_meetings”, “dam”,“dam_sire”, “same_sire and”last_updated”. Note for grader: I will go into more depth why I am removing these in the future completion of this project.\n\nhorses.clean&lt;-horses[,-c(3,4,13,16,19,20,22,23,24,25,26)]\nhead(horses.clean,2)\n\n  horse_id       horse_name horse_country is_active country age\n1     L247     REAL SUPREME            HK      TRUE     AUS   9\n2    44170 LIM'S INVINCIBLE            SG      TRUE     AUS   3\n              trainer_id   colour     sex                owner_name import_type\n1                    CCW Chestnut Gelding Lai Ni Jan | Benvinda Lai         ISG\n2 STEVEN HAROLD BURRIDGE                               LIM'S STABLE            \n  current_rating start_of_season_rating total_stake no_of_1_2_3\n1             34                     39     6607700    8-5-6-75\n2             50                     NA       38182            \n\n\nWe are only interested in horses that run in Hong Kong while there are some horses in this data set that raced in Singapore.\n\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nhorses.clean&lt;-horses.clean%&gt;%\n  filter(horse_country == \"HK\")\n\nNow we want to clean “no_of_1_2_3”. This column represents how many 1st, 2nd, and 3rd place finishes the horse has ever had. The last number is the total number of races the horse has participated in. We are going to break up this column into seperate columns for placing finishes and number of races.\n\nlibrary(stringr)\n\nsplit1 &lt;-str_split_fixed(horses.clean$no_of_1_2_3, \"-\", 4)\nhorses.clean$first_place &lt;- split1[,1]\nhorses.clean$second_place &lt;- split1[,2]\nhorses.clean$third_place &lt;- split1[,3]\nhorses.clean$races &lt;- split1[,4]\n# Remove original column\nhorses.clean &lt;- horses.clean[,-15]\nhead(horses.clean,2)\n\n  horse_id     horse_name horse_country is_active country age trainer_id\n1     L247   REAL SUPREME            HK      TRUE     AUS   9        CCW\n2     T422 AMAZING MOMENT            HK      TRUE     AUS   6        OSP\n    colour     sex                owner_name import_type current_rating\n1 Chestnut Gelding Lai Ni Jan | Benvinda Lai         ISG             34\n2      Bay Gelding   Treinta Pares Syndicate          PP             60\n  start_of_season_rating total_stake first_place second_place third_place races\n1                     39     6607700           8            5           6    75\n2                     57     1337225           1            1           4    19"
  },
  {
    "objectID": "cleaning/cleaning.html#now-lets-clean-performances",
    "href": "cleaning/cleaning.html#now-lets-clean-performances",
    "title": "Data Cleaning",
    "section": "",
    "text": "head(performances,2)\n\n  horse_id horse_name horse_name_zh horse_no race_id race_no race_date\n1    34204  LORD GREG     LORD GREG       NA      NA       0   00:00.0\n2    34204  LORD GREG     LORD GREG       NA      NA       0   00:00.0\n  race_country final_placing    season going rating jockey_id jockey_name\n1           SG             3 2006/2007     G     37  O CHAVEZ    O CHAVEZ\n2           SG             2 2006/2007     G     37 B VORSTER   B VORSTER\n  jockey_name_zh\n1         查维斯\n2         沃斯特\n                                                                                    jockey_url\n1  http://www.turfclub.com.sg/Industry/Jockeys/Pages/JockeyDirectoryDetails.aspx?Name=O+CHAVEZ\n2 http://www.turfclub.com.sg/Industry/Jockeys/Pages/JockeyDirectoryDetails.aspx?Name=B+VORSTER\n  trainer_id trainer_name trainer_name_zh\n1   O CHAVEZ      L LAXON            纳逊\n2  B VORSTER      L LAXON            纳逊\n                                                                                          trainer_url\n1 http://www.turfclub.com.sg/Industry/Trainers/Pages/TrainerDirectoryDetails.aspx?TrainerName=L+LAXON\n2 http://www.turfclub.com.sg/Industry/Trainers/Pages/TrainerDirectoryDetails.aspx?TrainerName=L+LAXON\n  winning_odds actual_weight running_positions finish_time on_date_weight gears\n1          2.6          53.5             7 7 3     1:24:50            497     B\n2          2.4          54.0             4 3 2 0.076736111            500     B\n  draw length_behind_winner race_class distance course race_location race_url\n1    6                 6.8L          5     1400                    S         \n2    2                 3.8L          5     1800                    S         \n  track sections sections_time last_updated\n1  Turf                             00:41.5\n2  Turf                             00:41.5\n\n\nWe are going to remove the column containing the Cantonese name for the horse, the date (as the data became corrupted through the original API and it is not necessarily important when we have the year of the season and measurements of the track quality to account for weather seasonality impacts on the track), jockey name in Cantonese, jockey url, trainer name in Cantonese, trainer url, race url, and last updated, and length behind winner. Length behind winner being deleted is okay because we have LBW for all 4 sections in another variable.\n\nperf.clean&lt;-performances[,-c(3,7,15,16,19,20,28,33,37)]\nhead(perf.clean,2)\n\n  horse_id horse_name horse_no race_id race_no race_country final_placing\n1    34204  LORD GREG       NA      NA       0           SG             3\n2    34204  LORD GREG       NA      NA       0           SG             2\n     season going rating jockey_id jockey_name trainer_id trainer_name\n1 2006/2007     G     37  O CHAVEZ    O CHAVEZ   O CHAVEZ      L LAXON\n2 2006/2007     G     37 B VORSTER   B VORSTER  B VORSTER      L LAXON\n  winning_odds actual_weight running_positions finish_time on_date_weight gears\n1          2.6          53.5             7 7 3     1:24:50            497     B\n2          2.4          54.0             4 3 2 0.076736111            500     B\n  draw race_class distance course race_location track sections sections_time\n1    6          5     1400                    S  Turf                       \n2    2          5     1800                    S  Turf                       \n\n\nWe are going to once again filter out any race in the dataset that happened in Singapore.\n\nperf.clean&lt;-perf.clean%&gt;%\n  filter(race_country == \"HK\")\n\nNow I am going to do one of the important parts of data cleaning for this analyis: Breaking the section data into 4 distinct columns, both for LBW and time.\n\n# Getting rid of brackets and commas in the columns\nperf.clean$sections &lt;- str_replace_all(perf.clean$sections,\"\\\\[|\\\\]|\\\\,|\\\\{\",\"\")\nperf.clean$sections &lt;- str_replace_all(perf.clean$sections,\"\\\\}\",\",\")\nperf.clean$sections_time &lt;- str_replace_all(perf.clean$sections_time,\"\\\\[|\\\\]|\\\\,|\\\\{\",\"\")\nperf.clean$sections_time &lt;- str_replace_all(perf.clean$sections_time,\"\\\\}\",\",\")\n\n\n# splitting each section into their own column\nsplit2 &lt;-str_split_fixed(perf.clean$sections,\",\",4)\nperf.clean$section1&lt;-split2[,1]\nperf.clean$section2&lt;-split2[,2]\nperf.clean$section3&lt;-split2[,3]\nperf.clean$section4&lt;-split2[,4]\n\n\n# same thing for section time\nsplit3 &lt;-str_split_fixed(perf.clean$sections_time,\",\",4)\nperf.clean$section1_time&lt;-split3[,1]\nperf.clean$section2_time&lt;-split3[,2]\nperf.clean$section3_time&lt;-split3[,3]\nperf.clean$section4_time&lt;-split3[,4]\n\n\nhead(perf.clean,2)\n\n  horse_id horse_name horse_no race_id race_no race_country final_placing\n1     A001 BURST AWAY        6     250       1           HK            11\n2     A001 BURST AWAY        6     313       6           HK            11\n     season going rating jockey_id jockey_name trainer_id trainer_name\n1 2016/2017     G     72        MG     G Mosse        MKL      K L Man\n2 2016/2017     G     72       YML   M L Yeung        MKL      K L Man\n  winning_odds actual_weight running_positions finish_time on_date_weight gears\n1           49           125            9 7 11     1.10.04           1083      \n2           30           124            4 3 11     1.11.86           1073      \n  draw race_class distance course race_location track\n1   13          3     1200      A            ST  Turf\n2    6          3     1200      A            HV  Turf\n                                                                                 sections\n1         \"lbw\": \"5-1/4\" \"placing\": 9, \"lbw\": \"3\" \"placing\": 7, \"lbw\": \"4\" \"placing\": 11,\n2 \"lbw\": \"2-1/4\" \"placing\": 4, \"lbw\": \"1-1/2\" \"placing\": 3, \"lbw\": \"6-1/2\" \"placing\": 11,\n                                       sections_time\n1 \"time\": \"24.21\", \"time\": \"22.03\", \"time\": \"23.80\",\n2 \"time\": \"23.73\", \"time\": \"23.61\", \"time\": \"24.52\",\n                     section1                     section2\n1 \"lbw\": \"5-1/4\" \"placing\": 9      \"lbw\": \"3\" \"placing\": 7\n2 \"lbw\": \"2-1/4\" \"placing\": 4  \"lbw\": \"1-1/2\" \"placing\": 3\n                       section3 section4   section1_time    section2_time\n1      \"lbw\": \"4\" \"placing\": 11          \"time\": \"24.21\"  \"time\": \"22.03\"\n2  \"lbw\": \"6-1/2\" \"placing\": 11          \"time\": \"23.73\"  \"time\": \"23.61\"\n     section3_time section4_time\n1  \"time\": \"23.80\"              \n2  \"time\": \"24.52\"              \n\n\nNote for grader:Unfortunately, this part is really weird because of data loss, so this will have to be further cleaned later on, most likely with the help of a professor. You can see that I attempted to break up the data into the 4 sections of the track but it got a little finicky."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Home",
    "section": "",
    "text": "See the following link for more information about the author: About Me\nThis page will serve as a page that hosts the executive summary to this project and as a navigation resource.\nThis is a Quarto website."
  },
  {
    "objectID": "eda/eda.html",
    "href": "eda/eda.html",
    "title": "Data Exploration",
    "section": "",
    "text": "Build out your website tab for exploratory data analysis"
  },
  {
    "objectID": "eda/eda.html#quick-look-at-the-data",
    "href": "eda/eda.html#quick-look-at-the-data",
    "title": "Data Exploration",
    "section": "Quick look at the data",
    "text": "Quick look at the data\n\n# Import seaborn\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Apply the default theme\nsns.set_theme(style=\"whitegrid\", palette=\"pastel\")\n\n# Load an example dataset\ntips = sns.load_dataset(\"tips\")\nprint(tips)\n\n     total_bill   tip     sex smoker   day    time  size\n0         16.99  1.01  Female     No   Sun  Dinner     2\n1         10.34  1.66    Male     No   Sun  Dinner     3\n2         21.01  3.50    Male     No   Sun  Dinner     3\n3         23.68  3.31    Male     No   Sun  Dinner     2\n4         24.59  3.61  Female     No   Sun  Dinner     4\n..          ...   ...     ...    ...   ...     ...   ...\n239       29.03  5.92    Male     No   Sat  Dinner     3\n240       27.18  2.00  Female    Yes   Sat  Dinner     2\n241       22.67  2.00    Male    Yes   Sat  Dinner     2\n242       17.82  1.75    Male     No   Sat  Dinner     2\n243       18.78  3.00  Female     No  Thur  Dinner     2\n\n[244 rows x 7 columns]"
  },
  {
    "objectID": "eda/eda.html#basic-visualization",
    "href": "eda/eda.html#basic-visualization",
    "title": "Data Exploration",
    "section": "Basic visualization",
    "text": "Basic visualization\n\n\n# Create a visualization\nsns.relplot(\n    data=tips,\n    x=\"total_bill\", y=\"tip\", col=\"time\",\n    hue=\"smoker\", style=\"smoker\", size=\"size\",\n)\n\nplt.show()"
  },
  {
    "objectID": "clustering/clustering.html",
    "href": "clustering/clustering.html",
    "title": "Clustering",
    "section": "",
    "text": "Build out your website tab for “clustering”"
  }
]